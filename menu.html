<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cucina Fibonacci Menu</title>



    <link rel="apple-touch-icon" sizes="180x180" href="myIcons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="myIcons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="myIcons/favicon-16x16.png">
    <link rel="manifest" href="myIcons/site.webmanifest">
    <link rel="mask-icon" href="myIcons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="myIcons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="myIcons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

</head>

<section id="bistro">
    <h1>MENU</h1>
    <div>
        <img id="line" src="imgs/line.svg" alt="line"></div>
</section>

<header>
    <nav class="menu">
        <!--        <div class="filter" data-retter="alle"></div>-->
        <div class="filter" id="forret" data-kategori="antipasti">
            <p>ANTIPASTI</p>
        </div>
        <div class="filter" id="hovedret" data-kategori="secondi">
            <p>SECONDI</p>
        </div>
        <div class="filter" id="dessert" data-kategori="dolce">
            <p>DOLCE</p>
        </div>
        <div class="filter" id="drinks" data-kategori="bevande">
            <p>BEVANDE</p>
        </div>
    </nav>
</header>

<!--

//***************** STYLE ***************//
-->
<style>
    body {
        background-image: url(imgs/marble.svg);
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        width: 65vw;
        margin: auto;
        display: grid;
        grid-template-rows: auto;
    }

    nav {
        text-align: center;
        padding: 10px;
        justify-content: center;
        font-family: "optima";
        color: white;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        grid-gap: 7px;

    }

    .filter:hover {
        filter: grayscale(1);
    }

    #line {
        width: 100%;
        padding-bottom: 2rem;
    }



    #forret {
        background-image: url(imgs/antipasti_m.svg);
        background-size: cover;
        display: grid;
        grid-column: span 1;
    }

    #forret p {
        padding-top: 55px;
        font-size: 0.9rem;

    }

    #hovedret p {
        padding-top: 55px;
        font-size: 0.9rem;
    }

    #dessert p {
        padding-top: 55px;
        font-size: 0.9rem;
    }

    #drinks p {
        padding-top: 55px;
        font-size: 0.9rem;
    }

    #hovedret {
        background-image: url(imgs/secondi_m.svg);
        background-size: cover;
        display: grid;
        grid-column: span 1;
    }

    #dessert {
        background-image: url(imgs/dolce_m.svg);
        background-size: cover;
        display: grid;
        grid-column: span 1;
    }

    #drinks {
        background-image: url(imgs/bevande_m.svg);
        background-size: cover;
        display: grid;
        grid-column: span 1;
    }

    .menu div {
        width: 30vw;
        height: 20vh;
    }

    .menu {
        padding-bottom: 2rem;
    }

    .kort {
        font-family: "optima";
        cursor: pointer;
        font-size: 1.35rem;
        color: #3D3D3D;

    }

    .lang {
        font-family: "snell roundhand";
        font-size: 1.2rem;
        color: #3D3D3D;
    }

    .pris {
        font-family: "snell roundhand";
        text-align: right;
        font-size: 1.35rem;
        color: #3D3D3D;
    }



    h1 {
        font-family: 'optima';
        font-size: 2.3rem;
        text-align: center;
        font-weight: 500;
        color: #3D3D3D;
    }

    h2 {
        font-family: 'optima';
        font-size: 1.5rem;
        font-weight: 500;
        color: #3D3D3D;
    }

    .hidden {
        display: none;
    }

    #detalje {
        position: fixed;
        top: 0;
        width: 100vw;
        height: 100vh;
        background-color: rgb(255, 255, 255);
        overflow: scroll;
        font-family: 'optima';
    }

    #detalje p {
        width: 65vw;
        margin: auto;
    }

    @media screen and (min-width:600px) {

        nav {
            text-align: center;
            padding: 10px;
            justify-content: center;
            font-family: "optima";
            color: white;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-gap: 7px;

        }

        #line {
            width: 65%;
            padding-left: 9.75rem;
        }

        #forret {
            background-image: url(imgs/antipasti.svg);
            background-size: cover;
            display: grid;
            grid-column: span 1;
        }

        #forret p {
            padding-top: 77px;
            font-size: 1.3rem;

        }

        #hovedret p {
            padding-top: 77px;
            font-size: 1.3rem;
        }

        #dessert p {
            padding-top: 77px;
            font-size: 1.3rem;
        }

        #drinks p {
            padding-top: 77px;
            font-size: 1.3rem;
        }

        #hovedret {
            background-image: url(imgs/secondi.svg);
            background-size: cover;
            display: grid;
            grid-column: span 1;
        }

        #dessert {
            background-image: url(imgs/dolce.svg);
            background-size: cover;
            display: grid;
            grid-column: span 1;
        }

        #drinks {
            background-image: url(imgs/bevande.svg);
            background-size: cover;
            display: grid;
            grid-column: span 1;
        }

        .menu div {
            width: 15vw;
            height: 29vh;
        }


    }

</style>





<body>


    <template>
        <article class="retter">
            <h2></h2>
            <div class="beskrivelse">
                <p class="kort"></p>
                <p class="lang"></p>
            </div>
            <div class="kroner">
                <p class="pris"></p>
            </div>
        </article>
    </template>

    <main></main>

    <section id="detalje" class="hidden">
        <button>X</button>
        <article id="mad">
            <h2></h2>
            <p class="kort"></p>
            <p class="allergener"></p>
        </article>
    </section>

    <main></main>






    <script>
        const endpoint = "http://spreadsheets.google.com/feeds/list/1nAxuWNTwRgYLt9MzjyuwMsVFytLB2IQNq4w0k79HzO8/od6/public/values?alt=json";

        let retter = [];
        let filter = "alle";
        const popUp = document.querySelector("#detalje");

        document.addEventListener("DOMContentLoaded", hentData);


        async function hentData() {
            const response = await fetch(endpoint);
            //console.log(response);
            retter = await response.json();
            //console.log(retter);
            visRetter();
        }


        //console.log(retter);


        function visRetter() {
            const container = document.querySelector("main");
            const retTemplate = document.querySelector("template");
            container.innerHTML = "";

            retter.feed.entry.forEach((ret) => {
                //console.log(ret);

                //nÃ¥r if henviser til en knap, bliver data hentet efter kategori

                if (filter == "alle" || filter == ret.gsx$kategori.$t) {
                    const klon = retTemplate.cloneNode(true).content;
                    klon.querySelector(".kort").textContent = ret.gsx$kort.$t;
                    klon.querySelector(".pris").textContent = ret.gsx$pris.$t + (",-");
                    klon.querySelector(".lang").textContent = ret.gsx$lang.$t;
                    klon.querySelector(".retter").addEventListener("click", () => {
                        visDetaljer(ret);
                    });

                    container.appendChild(klon);
                }
            })
            addEventListenersToButtons();
        }

        function visDetaljer(ret) {
            //console.log(ret, popUp, popUp.classList)
            popUp.classList.remove("hidden");
            popUp.querySelector("button").addEventListener("click", () => popUp.classList.add("hidden"));
            popUp.querySelector(".kort").textContent = ret.gsx$kort.$t;
            popUp.querySelector(".allergener").textContent = ret.gsx$allergener.$t;
        }


        function addEventListenersToButtons() {
            document.querySelectorAll(".filter").forEach(elm => {
                elm.addEventListener("click", filtrering);
            })
        }

        function filtrering() {
            console.log("FILTER", this.dataset.kategori);
            filter = this.dataset.kategori;
            visRetter();
        }

    </script>
</body>

</html>
